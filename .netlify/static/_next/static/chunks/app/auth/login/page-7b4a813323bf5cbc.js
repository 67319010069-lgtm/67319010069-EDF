(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{6087:function(e,t,r){Promise.resolve().then(r.bind(r,133))},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},133:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(3827),a=r(4090),n=r(7907),l=r(8792),i=r(4958),o=r(1399);function u(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(""),[u,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),g=async r=>{r.preventDefault(),m(!0),f("");let{data:s,error:a}=await i.auth.signIn(t,u);if(a){f(a.message),m(!1);return}e.push("/dashboard")};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-pink-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)(l.default,{href:"/",className:"inline-flex items-center space-x-2",children:[(0,s.jsx)(o.nGB,{className:"text-5xl text-pink-500"}),(0,s.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-pink-400 to-pink-600 bg-clip-text text-transparent",children:"Eduflow"})]}),(0,s.jsx)("p",{className:"text-gray-800 mt-2",children:"เข้าสู่ระบบเพื่อเริ่มเรียนรู้"})]}),(0,s.jsxs)("div",{className:"glass p-8 rounded-2xl shadow-xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"เข้าสู่ระบบ"}),p&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:p}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"อีเมล"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.SRX,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,s.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:border-transparent text-gray-900",placeholder:"your@email.com",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"รหัสผ่าน"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(o.kUi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,s.jsx)("input",{type:"password",value:u,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-400 focus:border-transparent text-gray-900",placeholder:"••••••••",required:!0})]})]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full py-3 bg-gradient-to-r from-pink-400 to-pink-600 text-white rounded-lg font-semibold hover:shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"กำลังเข้าสู่ระบบ...":"เข้าสู่ระบบ"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-800",children:["ยังไม่มีบัญชี?"," ",(0,s.jsx)(l.default,{href:"/auth/signup",className:"text-pink-600 font-semibold hover:underline",children:"สมัครสมาชิก"})]})})]})]})})}},4958:function(e,t,r){"use strict";r.r(t),r.d(t,{auth:function(){return a},db:function(){return n},storage:function(){return l},supabase:function(){return s}});let s=(0,r(7688).eI)("https://ctnmxbhrlqcboztdumgb.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN0bm14YmhybHFjYm96dGR1bWdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3NTA0MzgsImV4cCI6MjA4NjMyNjQzOH0.CBikuMmopGp_wOQvlVNIQXuBQ-dQ7DysT05tpgA156E"),a={signUp:async function(e,t,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"student",{data:n,error:l}=await s.auth.signUp({email:e,password:t,options:{data:{full_name:r,role:a,password:t}}});return{data:n,error:l}},signIn:async(e,t)=>{let{data:r,error:a}=await s.auth.signInWithPassword({email:e,password:t});return{data:r,error:a}},signOut:async()=>{let{error:e}=await s.auth.signOut();return{error:e}},getSession:async()=>{let{data:{session:e},error:t}=await s.auth.getSession();return{session:e,error:t}},getUser:async()=>{let{data:{user:e},error:t}=await s.auth.getUser();return{user:e,error:t}}},n={getProfile:async e=>{let{data:t,error:r}=await s.from("profiles").select("*").eq("id",e).single();return{data:t,error:r}},updateProfile:async(e,t)=>{let{data:r,error:a}=await s.from("profiles").update(t).eq("id",e).select().single();return{data:r,error:a}},getCourses:async e=>{let t=s.from("courses").select("\n      *,\n      instructor:profiles!instructor_id(full_name, avatar_url),\n      lessons(id),\n      reviews(rating)\n    ");(null==e?void 0:e.published)!==void 0&&(t=t.eq("published",e.published)),(null==e?void 0:e.category)&&(t=t.eq("category",e.category)),(null==e?void 0:e.search)&&(t=t.ilike("title","%".concat(e.search,"%")));let{data:r,error:a}=await t.order("created_at",{ascending:!1});return{data:r,error:a}},getCourse:async e=>{let{data:t,error:r}=await s.from("courses").select("\n        *,\n        instructor:profiles!instructor_id(full_name, avatar_url, email),\n        lessons(*),\n        reviews(id, rating, comment, created_at, user:profiles(full_name, avatar_url))\n      ").eq("id",e).single();return{data:t,error:r}},createCourse:async e=>{let{data:t,error:r}=await s.from("courses").insert(e).select().single();return{data:t,error:r}},updateCourse:async(e,t)=>{let{data:r,error:a}=await s.from("courses").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();return{data:r,error:a}},deleteCourse:async e=>{let{error:t}=await s.from("courses").delete().eq("id",e);return{error:t}},createLesson:async e=>{let{data:t,error:r}=await s.from("lessons").insert(e).select().single();return{data:t,error:r}},updateLesson:async(e,t)=>{let{data:r,error:a}=await s.from("lessons").update(t).eq("id",e).select().single();return{data:r,error:a}},deleteLesson:async e=>{let{error:t}=await s.from("lessons").delete().eq("id",e);return{error:t}},getEnrollment:async(e,t)=>{let{data:r,error:a}=await s.from("enrollments").select("*").eq("user_id",e).eq("course_id",t).single();return{data:r,error:a}},getUserEnrollments:async e=>{let{data:t,error:r}=await s.from("enrollments").select("\n        *,\n        course:courses(*, instructor:profiles!instructor_id(full_name), lessons(id))\n      ").eq("user_id",e).order("enrolled_at",{ascending:!1});return{data:t,error:r}},createEnrollment:async(e,t)=>{let{data:r,error:a}=await s.from("enrollments").insert({user_id:e,course_id:t}).select().single();return{data:r,error:a}},updateProgress:async(e,t)=>{let{data:r,error:a}=await s.from("enrollments").update({progress:t}).eq("id",e).select().single();return{data:r,error:a}},createReview:async e=>{let{data:t,error:r}=await s.from("reviews").insert(e).select().single();return{data:t,error:r}},updateReview:async(e,t)=>{let{data:r,error:a}=await s.from("reviews").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();return{data:r,error:a}},getUserReview:async(e,t)=>{let{data:r,error:a}=await s.from("reviews").select("*").eq("user_id",e).eq("course_id",t).single();return{data:r,error:a}}},l={uploadAvatar:async(e,t)=>{let r=t.name.split(".").pop(),a="".concat(e,".").concat(r),{data:n,error:l}=await s.storage.from("avatars").upload(a,t,{upsert:!0});if(l)return{data:null,error:l};let{data:{publicUrl:i}}=s.storage.from("avatars").getPublicUrl(a);return{data:i,error:null}},uploadThumbnail:async(e,t)=>{let r=t.name.split(".").pop(),a="".concat(e,".").concat(r),{data:n,error:l}=await s.storage.from("thumbnails").upload(a,t,{upsert:!0});if(l)return{data:null,error:l};let{data:{publicUrl:i}}=s.storage.from("thumbnails").getPublicUrl(a);return{data:i,error:null}},uploadCourseFile:async(e,t)=>{let r=t.name.split(".").pop(),a="".concat(e,"/").concat(Date.now(),".").concat(r),{data:n,error:l}=await s.storage.from("course-files").upload(a,t);if(l)return{data:null,error:l};let{data:{publicUrl:i}}=s.storage.from("course-files").getPublicUrl(a);return{data:i,error:null}}}}},function(e){e.O(0,[699,250,126,971,69,744],function(){return e(e.s=6087)}),_N_E=e.O()}]);